<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>chat.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Chat.html">Chat</a><ul class='methods'><li data-type='method'><a href="Chat.html#_onConversationMessageReceivedCallback">_onConversationMessageReceivedCallback</a></li><li data-type='method'><a href="Chat.html#_onManagerConnectedCallback">_onManagerConnectedCallback</a></li><li data-type='method'><a href="Chat.html#_onManagerSentScreenEventCallback">_onManagerSentScreenEventCallback</a></li><li data-type='method'><a href="Chat.html#_onScreenDataRequestedCallback">_onScreenDataRequestedCallback</a></li><li data-type='method'><a href="Chat.html#getConnectedManagers">getConnectedManagers</a></li><li data-type='method'><a href="Chat.html#getConversationHistory">getConversationHistory</a></li><li data-type='method'><a href="Chat.html#getManagerInfo">getManagerInfo</a></li><li data-type='method'><a href="Chat.html#getManagers">getManagers</a></li><li data-type='method'><a href="Chat.html#getVisitor">getVisitor</a></li><li data-type='method'><a href="Chat.html#receivedChatInfo">receivedChatInfo</a></li><li data-type='method'><a href="Chat.html#sendChatroomFileMessage">sendChatroomFileMessage</a></li><li data-type='method'><a href="Chat.html#sendFileMessage">sendFileMessage</a></li><li data-type='method'><a href="Chat.html#sendPage">sendPage</a></li><li data-type='method'><a href="Chat.html#sendTextMessage">sendTextMessage</a></li><li data-type='method'><a href="Chat.html#setVisitor">setVisitor</a></li><li data-type='method'><a href="Chat.html#sortMessages">sortMessages</a></li><li data-type='method'><a href="Chat.html#startConnection">startConnection</a></li><li data-type='method'><a href="Chat.html#stopConnection">stopConnection</a></li><li data-type='method'><a href="Chat.html#visitorTypes">visitorTypes</a></li></ul></li><li><a href="ChatixCore.html">ChatixCore</a><ul class='methods'><li data-type='method'><a href="ChatixCore.html#connectToChatroom">connectToChatroom</a></li><li data-type='method'><a href="ChatixCore.html#disconnectFromChatroom">disconnectFromChatroom</a></li><li data-type='method'><a href="ChatixCore.html#getAllChatrooms">getAllChatrooms</a></li><li data-type='method'><a href="ChatixCore.html#getAllManagers">getAllManagers</a></li><li data-type='method'><a href="ChatixCore.html#getChatroom">getChatroom</a></li><li data-type='method'><a href="ChatixCore.html#getChatroomMembers">getChatroomMembers</a></li><li data-type='method'><a href="ChatixCore.html#getChatroomMessages">getChatroomMessages</a></li><li data-type='method'><a href="ChatixCore.html#getConnectedManagers">getConnectedManagers</a></li><li data-type='method'><a href="ChatixCore.html#getConversationMessages">getConversationMessages</a></li><li data-type='method'><a href="ChatixCore.html#getMinutesToWork">getMinutesToWork</a></li><li data-type='method'><a href="ChatixCore.html#getMyChatrooms">getMyChatrooms</a></li><li data-type='method'><a href="ChatixCore.html#getVisitor">getVisitor</a></li><li data-type='method'><a href="ChatixCore.html#getWebChat">getWebChat</a></li><li data-type='method'><a href="ChatixCore.html#interruptScreencast">interruptScreencast</a></li><li data-type='method'><a href="ChatixCore.html#sendChatroomFileMessage">sendChatroomFileMessage</a></li><li data-type='method'><a href="ChatixCore.html#sendChatroomTextMessage">sendChatroomTextMessage</a></li><li data-type='method'><a href="ChatixCore.html#sendConversationFileMessage">sendConversationFileMessage</a></li><li data-type='method'><a href="ChatixCore.html#sendConversationTextMessage">sendConversationTextMessage</a></li><li data-type='method'><a href="ChatixCore.html#sendScreencastPermission">sendScreencastPermission</a></li><li data-type='method'><a href="ChatixCore.html#setEmail">setEmail</a></li><li data-type='method'><a href="ChatixCore.html#setField">setField</a></li><li data-type='method'><a href="ChatixCore.html#setName">setName</a></li><li data-type='method'><a href="ChatixCore.html#setVisitor">setVisitor</a></li><li data-type='method'><a href="ChatixCore.html#start">start</a></li><li data-type='method'><a href="ChatixCore.html#stop">stop</a></li><li data-type='method'><a href="ChatixCore.html#visitorType">visitorType</a></li></ul></li><li><a href="Chatroom.html">Chatroom</a><ul class='methods'><li data-type='method'><a href="Chatroom.html#.buildFromInfo">buildFromInfo</a></li><li data-type='method'><a href="Chatroom.html#getId">getId</a></li><li data-type='method'><a href="Chatroom.html#getIsPrivate">getIsPrivate</a></li><li data-type='method'><a href="Chatroom.html#getManagers">getManagers</a></li><li data-type='method'><a href="Chatroom.html#getNumberOfVisitors">getNumberOfVisitors</a></li><li data-type='method'><a href="Chatroom.html#getTitle">getTitle</a></li><li data-type='method'><a href="Chatroom.html#getTotalNumberOfUsers">getTotalNumberOfUsers</a></li><li data-type='method'><a href="Chatroom.html#setId">setId</a></li><li data-type='method'><a href="Chatroom.html#setIsPrivate">setIsPrivate</a></li><li data-type='method'><a href="Chatroom.html#setManagers">setManagers</a></li><li data-type='method'><a href="Chatroom.html#setNumberOfVisitors">setNumberOfVisitors</a></li><li data-type='method'><a href="Chatroom.html#setTitle">setTitle</a></li></ul></li><li><a href="ChatroomMember.html">ChatroomMember</a></li><li><a href="Connection.html">Connection</a><ul class='members'><li data-type='member'><a href="Connection.html#.STATE_CONNECTING">STATE_CONNECTING</a></li></ul><ul class='methods'><li data-type='method'><a href="Connection.html#allowScreenCast">allowScreenCast</a></li><li data-type='method'><a href="Connection.html#connectToChatroom">connectToChatroom</a></li><li data-type='method'><a href="Connection.html#disconnectFromChatroom">disconnectFromChatroom</a></li><li data-type='method'><a href="Connection.html#getAllChatrooms">getAllChatrooms</a></li><li data-type='method'><a href="Connection.html#getChatroom">getChatroom</a></li><li data-type='method'><a href="Connection.html#getChatroomHistory">getChatroomHistory</a></li><li data-type='method'><a href="Connection.html#getChatroomMembers">getChatroomMembers</a></li><li data-type='method'><a href="Connection.html#getConnectedToConversationManagers">getConnectedToConversationManagers</a></li><li data-type='method'><a href="Connection.html#getConnectionState">getConnectionState</a></li><li data-type='method'><a href="Connection.html#getConnectionStateDescription">getConnectionStateDescription</a></li><li data-type='method'><a href="Connection.html#getConversationHistory">getConversationHistory</a></li><li data-type='method'><a href="Connection.html#getManagerInfo">getManagerInfo</a></li><li data-type='method'><a href="Connection.html#getMyChatrooms">getMyChatrooms</a></li><li data-type='method'><a href="Connection.html#getNewVisitorId">getNewVisitorId</a></li><li data-type='method'><a href="Connection.html#getVisitorByVisitor">getVisitorByVisitor</a></li><li data-type='method'><a href="Connection.html#getVisitorInfo">getVisitorInfo</a></li><li data-type='method'><a href="Connection.html#getWebChatInfo">getWebChatInfo</a></li><li data-type='method'><a href="Connection.html#getWebChatManagers">getWebChatManagers</a></li><li data-type='method'><a href="Connection.html#interruptScreenCast">interruptScreenCast</a></li><li data-type='method'><a href="Connection.html#onInvalidVisitorIdConnected">onInvalidVisitorIdConnected</a></li><li data-type='method'><a href="Connection.html#sendBroadcastData">sendBroadcastData</a></li><li data-type='method'><a href="Connection.html#sendBroadcastEvent">sendBroadcastEvent</a></li><li data-type='method'><a href="Connection.html#sendChatroomMessage">sendChatroomMessage</a></li><li data-type='method'><a href="Connection.html#sendMessage">sendMessage</a></li><li data-type='method'><a href="Connection.html#sendPage">sendPage</a></li><li data-type='method'><a href="Connection.html#sendVisitorInfo">sendVisitorInfo</a></li><li data-type='method'><a href="Connection.html#sendVisitorTypedText">sendVisitorTypedText</a></li><li data-type='method'><a href="Connection.html#start">start</a></li><li data-type='method'><a href="Connection.html#stop">stop</a></li></ul></li><li><a href="Manager.html">Manager</a><ul class='methods'><li data-type='method'><a href="Manager.html#.buildFromInfo">buildFromInfo</a></li><li data-type='method'><a href="Manager.html#getAvatarUrl">getAvatarUrl</a></li><li data-type='method'><a href="Manager.html#getEmail">getEmail</a></li><li data-type='method'><a href="Manager.html#getIsOnline">getIsOnline</a></li><li data-type='method'><a href="Manager.html#getName">getName</a></li><li data-type='method'><a href="Manager.html#getUuid">getUuid</a></li><li data-type='method'><a href="Manager.html#setEmail">setEmail</a></li><li data-type='method'><a href="Manager.html#setIsOnline">setIsOnline</a></li><li data-type='method'><a href="Manager.html#setName">setName</a></li><li data-type='method'><a href="Manager.html#setUuid">setUuid</a></li></ul></li><li><a href="Message.html">Message</a><ul class='members'><li data-type='member'><a href="Message.html#.TYPE_TEXT">TYPE_TEXT</a></li></ul><ul class='methods'><li data-type='method'><a href="Message.html#.buildFromInfo">buildFromInfo</a></li><li data-type='method'><a href="Message.html#.buildText">buildText</a></li></ul></li><li><a href="User.html">User</a><ul class='methods'><li data-type='method'><a href="User.html#getEmail">getEmail</a></li><li data-type='method'><a href="User.html#getIsOnline">getIsOnline</a></li><li data-type='method'><a href="User.html#getName">getName</a></li><li data-type='method'><a href="User.html#getUuid">getUuid</a></li><li data-type='method'><a href="User.html#setEmail">setEmail</a></li><li data-type='method'><a href="User.html#setIsOnline">setIsOnline</a></li><li data-type='method'><a href="User.html#setName">setName</a></li><li data-type='method'><a href="User.html#setUuid">setUuid</a></li></ul></li><li><a href="Visitor.html">Visitor</a><ul class='methods'><li data-type='method'><a href="Visitor.html#.buildFromInfo">buildFromInfo</a></li><li data-type='method'><a href="Visitor.html#getEmail">getEmail</a></li><li data-type='method'><a href="Visitor.html#getFields">getFields</a></li><li data-type='method'><a href="Visitor.html#getIsOnline">getIsOnline</a></li><li data-type='method'><a href="Visitor.html#getName">getName</a></li><li data-type='method'><a href="Visitor.html#getUuid">getUuid</a></li><li data-type='method'><a href="Visitor.html#setEmail">setEmail</a></li><li data-type='method'><a href="Visitor.html#setFields">setFields</a></li><li data-type='method'><a href="Visitor.html#setIsOnline">setIsOnline</a></li><li data-type='method'><a href="Visitor.html#setName">setName</a></li><li data-type='method'><a href="Visitor.html#setUuid">setUuid</a></li></ul></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">chat.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Message from './message'
import Visitor from './visitor'
import Connection from "./connection";
import axios from "axios";

// const API_URL = process.env.API_URL + ':' + process.env.API_PORT + '/' + process.env.API_PATH;
const API_URL = 'https://beta.chatix.io:5022/v1';

/**
 * Chat class represents conversation between visitor and managers. This is main private class for all actions inside
 * library.
 * @property {Manager[]} managers people who are connected to current conversation in dashboard
 * @property {Visitor} visitor user who visits current page
 * @property {Connection} connection class provides protocol implementation
 */
class Chat {

   /**
    * Chat constructor
    * @param {string} websiteId Website ID from Chatix dashboard
    * @param {string} visitrorId Visitor ID can be passed from backend. If null, SDK will try to find it in 
    * local storage and request new if it wasn't found in storage.
    */
   constructor(websiteId, visitrorId = null) {
      this.websiteId = websiteId;
      this.messages = [];
      this.managers = [];

      this.onConnected = function(){};
		this.onDisconnected = function(){};
		this.onManagerConnectedToConversation = function(){};
		this.onManagerDisconnectedFromConversation = function(){};
		this.onConversationMessageReceived = function(){};
		this.onConversationMessageUpdated = function(){};
      this.onConversationMessageDeleted = function(){};
      this.onChatroomCreated = function(){};
      this.onChatroomUpdated = function(){};
      this.onChatroomDeleted = function(){};
      this.onChatroomRestored = function(){};
		this.onChatroomMessageReceived = function(){};
		this.onChatroomMessageUpdated = function(){};
		this.onChatroomMessageDeleted = function(){};
		this.onMemberConnectedToChatroom = function(){};
		this.onManagerConnectedToChatroom = function(){};
		this.onVisitorDisconnectedFromChatroom = function(){};
		this.onManagerDisconnectedFromChatroom = function(){};
		this.onScreencastPermissionRequested = function(){};
		this.onManagerConnectedToScreencast = function(){};
      this.onManagerDisconnectedFromScreencast = function(){};
      
      this.connection = new Connection();
      this.connection.onConnected = this.onConnected;
      this.connection.onDisconnected = this.onDisconnected;
      this.connection.onApplyErrorMessage = (message, method) => {
         console.error("Chatix error occured in method " + method + ", desciption: " + message);
      };
      this.connection.onApplyDialogMessage = this._onConversationMessageReceivedCallback;
      this.connection.onConnectManagerToConversation = this.onManagerConnectedCallback;
      this.connection.onDisconnectManagerFromConversation = this.onManagerDisconnectedFromConversationCallback;
      this.connection.onScreencastRequested = this.onScreencastPermissionRequestedCallback;
      this.connection.onDisconnectManagerFromScreencast = this.onManagerDisconnectedFromScreencastCallback;
      this.connection.onApplyChatroomMessage = this.onChatroomMessageReceivedCallback;
      this.connection.onConnectManagerToChatroom = this.onManagerConnectedToChatroomCallback;
      this.connection.onDisonnectManagerFromChatroom = this.onManagerDisconnectedFromChatroomCallback;
      this.connection.onConnectVisitorToChatroom = this.onMemberConnectedToChatroomCallback;
      this.connection.onDisconnectVisitorFromChatroom = this.onMemberDisconnectedFromChatroomCallback;
      this.connection.onCreateChatroom = this.onChatroomCreatedCallback;
      this.connection.onUpdateChatroom = this.onChatroomUpdatedCallback;
      this.connection.onDeleteChatroom = this.onChatroomDeletedCallback;
      this.connection.onRestoreChatroom = this.onChatroomRestoredCallback;
      this.connection.onUpdateConversationMessage = this.onConversationMesssageUpdatedCallback;
      this.connection.onDeleteConversationMessage = this.onConversationMessageDeletedCallback;
      this.connection.onScreenDataRequested = this.onScreenDataRequestedCallback;
      this.connection.onManagerSentScreenEvent = this.onManagerSentScreenEventCallback;

      this.connection.onInvalidVisitorIdConnected = () => {console.error("Invalid Visitor Id Connection")};
      
      this.visitor = new Visitor();
      this.visitor.setUuid(visitrorId);
   }


   /**
    * Starts SignalR connection to server
    */
   async startConnection() {
      if (this.visitor.getUuid === null) {
         this.visitor.setUuid(await this.connection.getNewVisitorId(this.websiteId));
      }
      try {
         await this.connection.start(this.websiteId, this.visitor.getUuid());
         let visitor = await this.connection.getVisitorInfo();
         this.visitor = visitor;
         this.onConnected();
         return true;
      } catch(e) {
         console.error(e);
         return false;
      }
   }


   // applyVisitor() {
   // if (localStorage.getItem('chatix__visitorId') != null) {
   // localStorage.removeItem('chatix__visitorId')
   // }
   // if (!this.visitor) {
   // let storageValue = localStorage.getItem('chatix__visitorId_v1');
   // if (storageValue) {
   //       this.visitor = new Visitor(this);
   //       this.visitor.uuid = storageValue;
   //       return Promise.resolve();
   // } else {
   //       return axios.get(API_URL + '/visitor/get-id?websiteId=' + this.websiteId)
   //          .then((res) => {
   //             if (localStorage.getItem('chatix__visitorId_v0')) {
   //                localStorage.removeItem('chatix__visitorId_v0')
   //             }
   //             localStorage.setItem('chatix__visitorId_v1', res.data);
   //             this.visitor = new Visitor();
   //             this.visitor.uuid = res.data;
   //          }).catch(function(data){
   //             console.log(data.response);
   //          });
   // }
   // } else {
   // return Promise.resolve();
   // }
   // }

   /**
    * Stops network connection
    */
   async stopConnection() {
      try {
         await this.connection.stop();
         return true;
      } catch (e) {
         return false;
      }
   }

   async getWebchat() {
      return this.connection.getWebChatInfo();
   }

   /**
    * Getter for current conversation visitor
    *
    * @return {Visitor|null}
    */
   getVisitor() {
      return this.visitor;
   }

   /**
    * Setter for current conversation visitor
    * @param {Visitor} visitor
    */
   async setVisitor(visitor) {
      let responseVisitor = await this.connection.sendVisitorInfo(visitor);
      this.visitor = responseVisitor;
   }

   /**
    * Getter for all website managers
    *
    * @return {Manager[]|*}
    */
   async getManagers() {
      return await this.connection.getWebChatManagers();
   }

   /**
    * Getter for current conversation managers
    *
    * @return {Manager[]|*}
    */
   async getConnectedManagers() {
      return await this.connection.getConnectedToConversationManagers();
   }

   async sendBroadcastData(innerHTML, broadcastData) {
      await this.connection.sendBroadcastData(innerHTML, broadcastData);
   }

   async sendBroadcastEvent(broadcastEvent) {
      await this.connection.sendBroadcastEvent(broadcastEvent);
   }

   /**
    * Sends data to server about user navigation
    * @param {string} url Current page URL
    * @param {string} title Current page title
    */
   async sendPage(url, title) {
      await this.connection.sendPage(url, title);
   }

   /**
    * Sends current visitor typing
    * @param {string} text current visitor input
    */
   async visitorTypes(text) {
      await this.connection.sendVisitorTypedText(text);
   }

   /**
    * Sends request for current conversation messages. Messages returns ordered by sent time ascending.
    * 
    * @param {string|null} lastKnownMessageId ID of the last message in dialog you have rendered.
    * @param {number} count Number of messages to return.
    * @return {Promise.&lt;Message[]>}
    */
   async getConversationHistory(lastKnownMessageId = null, count = 50) {
      return this.connection.getConversationHistory(lastKnownMessageId, count);
   }

   /**
    * Gets information about manager from API
    * @param {string} managerId ID of manager you are interested in
    */
   async getManagerInfo(managerId) {
      return await this.connection.getManagerInfo(managerId);
   }

	/**
	* Sends text message to current conversation
   *
	* @param {text} text new message text
	*/
   async sendTextMessage(text) {
      let message = Message.buildText(text);
      return await this.connection.sendMessage(message);
   }

   /**
    * @private
    * Uploads conversation file to Chatix storage
    * @param {File} file File to send.
    * @see https://developer.mozilla.org/en-US/docs/Web/API/File to get more details
    */
   async _uploadConversationFile(file) {
      const data = new FormData();
      data.append('formFile', file);
      let response = await axios.post(API_URL + '/file/save?visitorId=' + this.visitor.getUuid() + '&amp;websiteId=' + this.websiteId, data);
      if (file.type == 'image/jpeg' || file.type == 'image/png') {
         let message = Message.buildImg(response.data);
         return await this.connection.sendMessage(message);
      }
      else {
         let message = Message.buildFile(response.data);
         return await this.connection.sendMessage(message);
      }
   }

   /**
    * Sends file or image message to Chatix
    * @param {File|File[]} files File to send or array of files
    * @see https://developer.mozilla.org/en-US/docs/Web/API/File to get more details
    */
   async sendFileMessage(files) {
      let response = [];
      if (files.length) {
         for (let file of files) {
            response.push(await this._uploadConversationFile(file));
         }
      }
      else {
         response.push(await this._uploadConversationFile(files));
      }
      return response;
   }


   /**
    * @private
    * Uploads chatroom file to Chatix storage
    * @param {File} file File to send.
    * @see https://developer.mozilla.org/en-US/docs/Web/API/File to get more details
    */
   async _uploadChatroomFile(file, chatroomId) {
      const data = new FormData();
      data.append('formFile', file);
      let response = await axios.post(API_URL + '/file/save?visitorId=' + this.visitor.getUuid() + '&amp;websiteId=' + this.websiteId + '&amp;chatroomId=' + chatroomId, data);
      if (file.type == 'image/jpeg' || file.type == 'image/png') {
         let message = Message.buildImg(response.data);
         return await this.connection.sendChatroomMessage(message);
      }
      else {
         let message = Message.buildFile(response.data);
         return await this.connection.sendChatroomMessage(message);
      }
   }

   async sendChatroomTextMessage(messageText, chatroomId) {
      return await this.connection.sendChatroomTextMessage(messageText, chatroomId);
   }

   /**
    * Sends files or images to chatroom
    * @param {File|File[]} files File or files to send
    * @param {string} chatroomId Chatroom ID where to send messages
    */
   async sendChatroomFileMessage(files, chatroomId) {
      let response = [];
      if (files.length) {
         for (let file of files) {
            response.push(await this._uploadChatroomFile(file, chatroomId));
         }
      }
      else {
         response.push(await this._uploadChatroomFile(files, chatroomId));
      }
      return response;
   }

   /**
    * Sorts messages by sent_at ascending
    * @param {Message[]} messages Messages array to sort
    */
   sortMessages(messages) {
      return messages.sort(function (a, b) {
         if (a.sent_at &lt; b.sent_at) {
            return -1;
         }
         else if (a.sent_at > b.sent_at) {
            return 1;
         }
         else {
            return 0;
         }
      });
   }

   async getChatroom(chatroomId) {
      return await this.connection.getChatroom(chatroomId);
   }

   async getAllChatrooms(page, perPage) {
      return await this.connection.getAllChatrooms(page, perPage);
   }

   async getMyChatrooms(page, perPage) {
      return await this.connection.getMyChatrooms(page, perPage);
   }

   async connectToChatroom(chatroomId) {
      return await this.connection.connectToChatroom(chatroomId);
   }

   async disconnectFromChatroom(chatroomId) {
      return await this.connection.disconnectFromChatroom(chatroomId);
   }

   async getChatroomMembers(chatroomId, page = 1, perPage = 100) {
      return await this.connection.getChatroomMembers(chatroomId, perPage, page);
   }

   async getChatroomHistory(chatroomId, lastKnownMessageId = null, count = 50) {
      return await this.connection.getChatroomHistory(chatroomId, lastKnownMessageId, count);
   }

   async sendScreencastPermission(flag) {
      return await this.connection.allowScreenCast(flag);
   }

   async interruptScreencast() {
      return await this.connection.interruptScreenCast();
   }

   /**
    * Receiving new message in conversation
    *
    * @param {Message} message new message
    * @todo обновить на получение одного сообщения
    */
   _onConversationMessageReceivedCallback(message) { 

      var allData = [];
      allData = allData.concat(this.messages, message);

      var sortMess = this.sortMessages(allData);

      this.messages = sortMess;

      this.onConversationMessageReceived(message)
   }

   /**
    * @todo Зачем?
    * @param {} chatInfo 
    */
   receivedChatInfo(chatInfo) {
      this.chatInfo = chatInfo;
      this.onChatInfo(chatInfo);
   }

   onConnectedCallback(visitor) {
      this.onConnected(visitor);
   }

   /**
    * 
    * @param {Manager} manager new connected manager
    */
   _onManagerConnectedCallback(manager) {
      this.managers.push(manager);
      this.onManagerConnectedToConversation(manager);
   }

   _onScreencastPermissionRequestedCallback() {
      this.onScreencastPermissionRequested();
   }

   _onManagerDisconnectedFromScreencastCallback(manager) {
      this.onManagerDisconnectedFromScreencast(manager);
   }

   _onManagerDisconnectedFromConversationCallback(manager) {
      this.onManagerDisconnectedFromConversation(manager);
   }

   _onChatroomMessageReceivedCallback(message, chatroomId) {
      this.onChatroomMessageReceived(message, chatroomId)
   }

   _onManagerConnectedToChatroomCallback(manager, chatroomId) {
      this.onManagerConnectedToChatroom(manager, chatroomId);
   }

   _onMemberConnectedToChatroomCallback(visitor, chatroomId) {
      this.onMemberConnectedToChatroom(visitor, chatroomId);
   }

   _onManagerDisconnectedFromChatroomCallback(manager, chatroomId) {
      this.onManagerDisconnectedFromChatroom(manager, chatroomId);
   }

   _onMemberDisconnectedFromChatroomCallback(visitor, chatroomId) {
      this.onMemberDisconnectedFromChatroom(visitor, chatroomId)
   }

   _onChatroomCreatedCallback(chatroom) {
      this.onChatroomCreated(chatroom);
   }

   _onChatroomUpdatedCallback(chatroom) {
      this.onChatroomUpdated(chatroom);
   }

   _onChatroomDeletedCallback(chatroomId) {
      this.onChatroomDeleted(chatroomId)
   }

   _onChatroomRestoredCallback(chatroom) {
      this.onChatroomRestored(chatroom);
   }

   _onConversationMesssageUpdatedCallback(message) {
      let messageIndex = this.messages.find(mess => mess.uuid === message.uuid);
      messageIndex = this.messages.indexOf(messageIndex);

      if (this.messages[messageIndex] !== undefined) {
         this.messages[messageIndex] = message;
      }
      this.onConversationMessageUpdated(message);
   }

   _onConversationMessageDeletedCallback(messageId) {
      let messageIndex = this.messages.find(mess => mess.uuid === messageId);
      messageIndex = this.messages.indexOf(messageIndex);

      if (this.messages[messageIndex] !== undefined) {
         delete this.messages[messageIndex];
      }
      this.onConversationMessageDeleted(messageId)
   }

   /**
    * @todo перенести логику отправки данных экрана в отдельный компонент
    */
   _onScreenDataRequestedCallback(){
      
   }

   /**
    * @todo перенести логику отрисовки ивентов в отдельный компонент
    */
   _onManagerSentScreenEventCallback(){

   }

}


export default Chat;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Aug 29 2019 16:10:02 GMT+0700 (GMT+07:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
